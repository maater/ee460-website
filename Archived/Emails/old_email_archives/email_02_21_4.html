<!-- commenting the email tags out .... 
From patt@zh2.hps.utexas.edu  Mon Feb 21 19:34:32 2011
Return-Path: <patt@zh2.hps.utexas.edu>
Received: from zh2.hps.utexas.edu (zh2.hps.utexas.edu [128.83.178.32])
	by ego.hps.utexas.edu (8.13.8/8.13.8) with ESMTP id p1M1YWjs032438;
	Mon, 21 Feb 2011 19:34:32 -0600
Received: from zh2.hps.utexas.edu (localhost.localdomain [127.0.0.1])
	by zh2.hps.utexas.edu (8.13.8/8.13.8) with ESMTP id p1M1YUGa002867;
	Mon, 21 Feb 2011 19:34:30 -0600
Received: (from patt@localhost)
	by zh2.hps.utexas.edu (8.13.8/8.13.8/Submit) id p1M1YTci002865;
	Mon, 21 Feb 2011 19:34:29 -0600
Date: Mon, 21 Feb 2011 19:34:29 -0600
From: "Yale N. Patt" <patt@ece.utexas.edu>
To: miladhashemi@gmail.com, faruk@hps.utexas.edu, yuhao.zhu@mail.utexas.edu
Subject: BEN and the control signals...
End comment here .... --> 
<HTML>
<HEAD>
<TITLE>EE 460N: Email Mon, 21 Feb 2011, 19:34</TITLE>
</HEAD>
<BODY TEXT="black" BGCOLOR="white" LINK="green" VLINK="purple" ALINK="#0000EE">
<H1></H1>
<p><font size=+1>Mon, 21 Feb 2011, 19:34</font>
<p><pre>
<font color="blue">
Two students in my office with questions about lab 3.  I thought I would share my
answers with all of you.

1. LD.BEN - when does it happen.  To answer them, I pointed to state 2, which 
contains MAR &lt;- B + offset, and asked them what control signals they needed.
Quickly they told me LD.MAR.  I asked them why?  They answered: because we are
writing to MAR.  So, I asked them: Is there any state in which they need to
write to BEN.  They gave me the answer, which of course answered their own question.

Note: we need a value in BEN in order to properly branch.  It is important that we
do not change BEN in the same cycle that we are using BEN to determine the address
of the next microinstruction.

2. The data path has a block labeled Control, with a bunch of arrows emanating from
the top.  They wanted to know where these arrows go.  Answer: These arrows represent
the control signals that control the various muxes, etc. in the data path.  Note that
every control signal has an arrowhead that is not filled in.  Notice that all the
arrowheads coming out of the Control block are not filled in.  I could have connected
every arrowhead out of the Control block to the mux, alu, etc. that it controls.  But,
if I did that, the diagram would have been unreadable.  So, instead I show the 
arrowheads coming out of the top of the Control block, and leave it to your imagination
to know that each finds its way to the mux, alu, etc. that it is controlling.

3. The data path has a mux labeled INMUX.  How do we set the select lines of that mux?
Answer: This is not part of the microcode.  You do not have to worry about it here.
Note that the select lines of the INMUX is generated by a block labeled Addr.Ctl.Logic.
Note also that one of the inputs to that block is MAR.  The LC-3b has memory-mapped
I/O, which means that what gets loaded depends on the address.  If MAR contains a
memory location, then the select lines of INMUX will select Memory.  If MAR contains
xFE02, the select lines of INMUX will select KBDR.

Good luck finishing the lab by Sunday night.

Yale Patt

</font>
</pre>
</body>
</html>
