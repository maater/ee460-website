<!-- commenting the email tags out .... 
From patt@login.hps.utexas.edu  Sat Feb 26 19:11:15 2011
Return-Path: <patt@login.hps.utexas.edu>
Received: from login.hps.utexas.edu (login.hps.utexas.edu [128.83.178.4])
	by ego.hps.utexas.edu (8.13.8/8.13.8) with ESMTP id p1R1BE6r013142;
	Sat, 26 Feb 2011 19:11:14 -0600
Received: from login.hps.utexas.edu (localhost.localdomain [127.0.0.1])
	by login.hps.utexas.edu (8.13.8/8.13.8) with ESMTP id p1R1BDsF019854;
	Sat, 26 Feb 2011 19:11:13 -0600
Received: (from patt@localhost)
	by login.hps.utexas.edu (8.13.8/8.13.8/Submit) id p1R1BDgd019853;
	Sat, 26 Feb 2011 19:11:13 -0600
Date: Sat, 26 Feb 2011 19:11:13 -0600
From: "Yale N. Patt" <patt@ece.utexas.edu>
To: miladhashemi@gmail.com, faruk@hps.utexas.edu, yuhao.zhu@mail.utexas.edu
Subject: Re: Memory Questions
End comment here .... --> 
<HTML>
<HEAD>
<TITLE>EE 460N: Email Sat, 26 Feb 2011, 19:11</TITLE>
</HEAD>
<BODY TEXT="black" BGCOLOR="white" LINK="green" VLINK="purple" ALINK="#0000EE">
<H1></H1>
<p><font size=+1>Sat, 26 Feb 2011, 19:11</font>
<p><pre>
<font color="blue">
A student writes, and in doing so, constructs detailed examples of what goes
on for each specific LD/ST, B/w case.  You might want to look at it if you are
a little uneasy about the accessing of memory and the structures in the LC-3b
that carry it out.
<font color="black">
&gt; Dr. Patt,
&gt; 
&gt; I am trying to figure out how the WE logic works and how it takes care
&gt; of endianness. Please tell me if I am thinking about this correctly.
</font>

Actually, there is no problem with endianness, since the LC-3b is little
endian; that is bits[7:0] go into the even address A, and bits[15:8] go
into the odd address A+1.  Recall the diagram that I drew on the whiteboard 
when I discussed unalignment in class last week.
<font color="black">
&gt; If STW is used to write 0xAABB to address 0x4000, 0xAABB is written to
&gt; MDR and the WE Logic (WE0 = WE1 = 1) causes 0xBB to be written at
&gt; 0x4000, and 0xAA at 0x4001.
</font>

Exactly correct!
<font color="black">
&gt; If STB is used to write 0x00AA to address 0x4000, 0xAAAA is written to
&gt; MDR and the the WE Logic (WE0 = 1, WE1 = 0) causes 0xAA to be written
&gt; at 0x4000.
</font>

This is correct also, except I would have preferred you had started your
sentence: If STB is used to write 0xAA to address 0x4000, ...

You are storing a byte so the thing you are talking about storing is a byte.
0x00AA is not a byte!  0xAA is a byte.  You see the difference?
<font color="black">
&gt; If STB is used to write 0x00AA to address 0x4001, 0xAAAA is written to
&gt; MDR and the the WE Logic (WE0 = 0, WE1 = 1) causes 0xAA to be written
&gt; at 0x4001.
</font>

Also, exactly correct, except for what I pointed out above.
<font color="black">
&gt; STW cannot be used to write to unaligned addresses, because some
&gt; exception will occur. (we don't have to worry about this for now)
</font>

Also, correct.  The operative words are "for now."  But, not to worry,
we will not cheat you out of that pleasure.  ...after Spring break.
<font color="black">
&gt; Assuming 0x4000 = 0xBB and 0x4001 = 0xAA, LDW R0, 0x4000 would make 
&gt; R0 = 0xAABB.
</font>

Exactly correct!
<font color="black">
&gt; What do LDB R0, 0x4000 and LDB R0, 0x4001 load into MDR in this case?

&gt; Thanks,
&gt; &lt;&lt;name withheld to protect the student examining each case in detail&gt;&gt;
</font>

Aha!  Finally, a case you need an answer to.  For awhile, I was getting the
feeling I was totally useless in this email exchange.  I did tell you this 
in class last week, but perhaps too quickly.  The full word 0xAABB would be 
loaded into MDR.  

You see the logic block that takes its input from MDR and gates its output
onto the bus.  Its job is to take 0xAABB from MDR, and knowing MAR[0] and 
BYTE.SIZE, gate the appropriate value onto the bus in the next clock cycle. 
Could you draw that logic (ECE316 question!) if you had to?

Finally, do you understand why it is okay to load 0xAABB into MDR?  More 
specifically, do you see the distinction between loads and stores when it 
comes to memory?  If not, ask me in class on Monday.

Good luck finishing lab 3 by tomorrow night.

Yale Patt

</font>
</pre>
</body>
</html>
