<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<title>EE 460N: Problem Set 4</title>
<link rel="StyleSheet" type="text/css" href="../../main.css" />
<link rel="StyleSheet" type="text/css" href="../probs.css" />
</head>
<body>

<center>
<h2>Department of Electrical and Computer Engineering</h2></center>
<center>
<h3>The University of Texas at Austin</h3></center>
EE 460N, Spring 2013
<br />Problem Set 4
<br />Due: April 8, before class
<br />Yale N. Patt, Instructor
<br />Faruk Guvenilir, Sumedha Bhangale, Stephen Pruett, TAs
<h2>Instructions</h2>
<p>You are encouraged to work on the problem set in groups and turn in
one problem set for the entire group. Remember to put all your names on
the solution sheet. Also remember to put the name of the TA in whose discussion
section you would like the problem set returned to you.</p>

<h2>Questions</h2>
<ol start="1" class="questions">

  <p><font color="red">Note: Problem Set Updated on 03/25/2011. Please be sure
    to view the latest version.</font></p>
<li><!-- Begin Question -->
<font color="red" size="-1">The following was postponed from PS3:</font>
<p>An ISA supports an 8-bit, byte-addressable virtual address space. The
corresponding physical memory has only 128 bytes. Each page contains 16
bytes. A simple, one-level translation scheme is used and the page table 
resides in physical memory. The initial contents of the frames of physical
memory are shown below.</p>
<table>
<thead>
<tr>
<th>Frame Number</th><th>Frame Contents</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>empty</td>
</tr>
<tr>
<td>1</td>
<td>Page 13</td>
</tr>
<tr>
<td>2</td>
<td>Page 5</td>
</tr>
<tr>
<td>3</td>
<td>Page 2</td>

</tr>
<tr>
<td>4</td>
<td>empty</td>
</tr>
<tr>
<td>5</td>
<td>Page 0</td>
</tr>
<tr>
<td>6</td>
<td>empty</td>
</tr>
<tr>
<td>7</td>
<td>Page Table</td>
</tr>
</tbody>
</table>

<p>A three-entry Translation Lookaside Buffer that uses LRU replacement is 
added to this system. Initially, this TLB contains the entries for pages
0, 2, and 13. For the following sequence of references, put a circle around
those that generate a TLB hit and put a rectangle around those that generate 
a page fault. What is the hit rate of the TLB for this sequence of references?
(Note: LRU policy is used to select pages for replacement in physical 
memory.)</p>
<p>References (to pages): 0, 13, 5, 2, 14, 14, 13, 6, 6, 13, 15, 14, 15, 13, 4, 3.</p>
<ol>
<li>At the end of this sequence, what three entries are contained in the TLB?</li>
<li>What are the contents of the 8 physical frames?</li>
</ol>
</li><!-- End Question -->

<li><!-- Begin Question -->
<font color="red" size="-1">The following was postponed from PS3:</font>
<p>A machine with 64KB, byte addressable virtual memory and 4KB physical
memory has two-level virtual address translation similar to the VAX.
The page size of this machine is 256 bytes. Virtual address space is
partitioned into the P0 space, P1 space, system space and reserved
space.  The space a virtual address belongs to is specified by the
most significant two bits of the virtual address, with 00 indicating
P0 space, 01 indicating P1 space, and 10 indicating system
space. Assume that the PTE is 32 bits and contains only the Valid bit 
and the PFN in the format V0000000..000PFN.</p>

<p>
For a single load instruction the physical memory was accessed three
times, <em>excluding instruction fetch</em>. The 
first access was at location <code>x108</code> and the value read from
that location (<code>x108</code>, <code>x109</code>, <code>x10A</code>, <code>x10B</code>) was <code>x80000004</code>. Hint: What does
this value mean?
</p>
<p>The second access was at location <code>x45C</code> and the third access was at
location <code>x942</code>.
</p>
<p>If SBR = <code>x100</code>, P0BR = <code>x8250</code> and P1BR = <code>x8350</code>,</p>
<ol>
<li>What is  the virtual address corresponding to physical address <code>x45C</code>?</li>
<li>What is 32 bit value read from location <code>x45C</code>?</li>
<li>What is the virtual address corresponding to physical address <code>x942</code>?</li>
</ol>
</li><!-- End Question -->

<li><!-- Begin Question -->
<font color="red" size="-1">The following was postponed from PS3:</font>
<p><b> Note: In this problem, the PTBR does not point to the first entry in the user space
page table, which actually starts at 0x3A0. This is an optimization to make it easier for the machine
to index into the user space page table .</b></p> 
<p>Consider a processor that supports a 9-bit physical address space with byte
addressable memory. We would like the processor to support a virtual memory system.
The features of the virtual memory system are:</p>
<pre>    Virtual Memory Size : 4 Kbytes (12 bit address-space)
    Page Size           : 32 bytes
    PTBR                : 0x380
    SBR                 : 0x1E0</pre> 
<p>The virtual memory is divided into two spaces: system space and user 
space. System space is the first kilobyte of the virtual address space (i.e., most 
significant two bits of the virtual address are 00). The rest of the virtual memory is 
user space. The system page table remains resident in physical memory. 
Each PTE contains, in addition to the PFN, a Valid bit, a modified bit and 2 bits for access
control. The format of the PTE is</p>

<table>       
<tr>
<td>Valid</td>
<td>Modified</td>
<td>Access Control</td>
<td>PFN</td>
</tr>
</table>

<p>(Valid bit is the most significant bit of the PTE and the PFN is stored 
in the least significant bits.)</p>
 
<ol>
<li><p>How many virtual pages does the system accommodate?</p></li>
<li><p>What is the size of the PFN? How big is the PTE?</p></li>
<li><p>How many bytes are required for storing the entire user space pagetable? How many pages does this correspond to?</p></li>

<li>
<p>Since the user space page table can occupy a significant 
portion of the the physical memory, this system uses a 2 level address translation 
scheme, by storing the user space Page Table in virtual 
memory (similar to VAX).</p>

<p>Given the virtual address 0x7AC what is the Physical address?</p>

<p>The following table shows the contents of the physical memory that you may 
need to do the translation:</p>

<table>
<tr>
<td>
	  <table>	    
	    <tr>
	      <th>Address</th>
	      <th>Data</th>
	      </tr>
	    <tr>
	      <td>
		<code>x1F8</code>
	      </td>
	      <td>
		<code>xBA</code>
	      </td>
	    </tr>

	    <tr>
	      <td>
		<code>x1F9</code>
	      </td>
	      <td>
		<code>xBB</code>
	      </td>
	    </tr>
	    <tr>
	      <td>
		<code>x1FA</code>
	      </td>
	      <td>
		<code>xBC</code>
	      </td>
	    </tr>
	    <tr>
	      <td>
		<code>x1FB</code>
	      </td>
	      <td>
		<code>xBD</code>
	      </td>	 
	    </tr>
	    <tr>
	      <td>
		<code>x1FC</code>
	      </td>
	      <td>
		<code>xBE</code>
	      </td>
	    </tr>
	    <tr>
	      <td>
		<code>x1FD</code>
	      </td>
	      <td>
		<code>xB8</code>
	      </td>
	    </tr>
	    <tr>
	      <td>
		<code>x1FE</code>
	      </td>
	      <td>
		<code>xB7</code>
	      </td>
	    </tr>	    
	    <tr>
	      <td>
		<code>x1FF</code>
	      </td>
	      <td>
		<code>xB6</code>
	      </td>
	    </tr>
	  </table>
</td><td>
	  <table>	    
	    <tr>
	      <th>Address</th>
	      <th>Data</th>
	      </tr>
	    <tr>
	      <td>
		<code>x118</code>
	      </td>
	      <td>
		<code>x81</code>
              </td>
	    </tr>

	    <tr>
	      <td>
		<code>x119</code>
	      </td>
	      <td>
		<code>x72</code>
	      </td>
	    </tr>
	    <tr>
	      <td>
		<code>x11A</code>
	      </td>
	      <td>
		<code>x65</code>
	      </td>
	    </tr>
	    <tr>
	      <td>
		<code>x11B</code>
	      </td>
	      <td>
		<code>x34</code>
	      </td>	 
	    </tr>
	    <tr>
	      <td>
		<code>x11C</code>
	      </td>
	      <td>
		<code>x97</code>
	      </td>
	    </tr>
	    <tr>
	      <td>
		<code>x11D</code>
	      </td>
	      <td>
		<code>x83</code>
	      </td>
	    </tr>
	    <tr>
	      <td>
		<code>x11E</code>
	      </td>
	      <td>
		<code>xC6</code>
	      </td>
	    </tr>	    
	    <tr>
	      <td>
		<code>x11F</code>
	      </td>
	      <td>
		<code>xB2</code>
	      </td>
	    </tr>
	  </table>
  </td></tr></table>
</li>
</ol>
</li><!-- End Question -->

<li><!-- Begin Question -->
<font color="red" size="-1">The following was postponed from PS3: (updated 03/24/11)</font>
<p>The virtual address of variable <var>X</var> is <code>x3456789A</code>. Find the physical address 
of <var>X</var>. Assume a Virtual Memory model similar to VAX. <font color="red">
  Assume 1GB of Physical Memory.</font></p>
<p>Remember that in VAX each Virtual Address consists of:</p>
<ul>
<li>2 bits to specify the Address Space</li>
<li>21 bits to specify Virtual Page Number</li>
<li>9 bits to specify the byte on the page</li>
</ul>

<p>You will need to know the contents of P0BR: <code>x8AC40000</code> and SBR: <code>x000C8000</code>.</p>

<p>You will also need to know the contents of the following physical memory locations:</p>
<pre>x1EBA6EF0:&nbsp;&nbsp;&nbsp; x80000A72
x0022D958:&nbsp;&nbsp;&nbsp; x800F5D37</pre>

<p>Some intermediate questions to help you:</p>

<ul>
<li>What virtual page of P0 Space is <var>X</var> on?</li>
<li>What is VA of the PTE of the page containing <var>X</var>?</li>
<li>What virtual page of System Space is this PTE on?</li>
<li>What is the PA of the PTE of this page of System Space?</li>
<li>What is the PA of the PTE of the page containing <var>X</var>?</li>
</ul>

</li><!-- End Question -->

<li><!-- Begin Question -->
<p>Explain the differences between exceptions and interrupts. Be concise
in your explanations.</p>
<p>Explain the similarities of exceptions and interrupts. Clearly
describe the steps required to handle an exception or an interrupt.</p>
</li><!-- End Question-->


<!-- Questions removed, see ps4_postponed.html -->

</body>
</html>








