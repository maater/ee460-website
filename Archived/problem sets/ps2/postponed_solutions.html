<li> <!-- Begin Question -->
<ol>
<li>
<ul>
<li>Byte on bus <code>Addr[1:0]</code></li>
<li>Interleave bits <code>Addr[4:2]</code></li>
<li>Chip address <code>Addr[7:5]</code></li>
<li>Row decode <code>Addr[11:8]</code></li>
</ul>
</li>
<li><p>577 Cycles. 
The first 8 memory accesses, A[0][0] to A[0][7], must occur sequentially with no overlap 
since they are all acesses to the same bank. Thus, it would take 80 cycles for the 1st 8 
memory accesses, with the 8th access starting in cycle 70. Since the 8th and 9th memory 
accesses, A[0][7] and A[1][0], respectively, are to different banks, the accesses can overlap, 
and the 9th access can start in cycle 71 (70 cycles for the 1st 7 accesses plus 1 additional 
cycle of the 8th access).  Continuing with this logic, the access to A[2][0] could start in 
cycle 142 (71x2). Finally, the access to A[7][0] could start in cycle 497 (71x7).  Now all 
that remains are 8 more memory accesses, all to the same bank (A[7][0] to A[7][7]). This 
takes another 80 cycles, bringing the total to 577 cycles (497 + 80).</p>
<p>
If the memory were not interleaved, all 64 memory accesses must happen sequentially with 
no overlap, so it would take a total of 640 cycles (64*10).  Therefore, we do gain some 
benefit from this interleaving scheme, but not that much.</p>
</li>
<li>
<p>Yes, a change can be made.  The new bits are:</p>
<ul>
<li>Byte on bus <code>Addr[1:0]</code></li>
<li>Interleave bits <code>Addr[7:5]</code></li>
<li>Chip address <code>Addr[4:2]</code></li>
<li>Row decode <code>Addr[11:8]</code></li>
</ul>
<p>
87 Cycles. 
With the new interleaving scheme, consecutive memory accesses are to different banks, so 
the accesses can overlap. The 1st access, A[0][0], would begin at cycle 0, the 2nd, 
A[0][1], at cycle 1, and so on. The 8th access, A[0][7], would start at cycle 7.  However, 
the 9th access, A[1][0], cannot start at cycle 8. It would have to wait 2 more cycles for 
the 1st access to finish since it is on the same bank as the 1st access; therefore, it 
would start at cycle 10. Continuing this logic, the access to A[2][0] would start 
at cycle 20, and finally, the access to A[7][0] would start at cycle 70.  Now, all that 
is left are 8 accesses, but they are all to different banks so they can start 1 cycle after 
each other.  The access to A[7][1] would begin at cycle 71, A[7][2] at 72, and finally A[7][7], 
the last memory access, would begin at cycle 77 and, therefore, end at cycle 87.</p>
</li>
<li><p>Only one line of code needs to be changed:</p>
<pre><code>sum = sum + A[i][j];
to
sum = sum + A[j][i];</code></pre>

<p>Alternatively, you could keep that line the same, but swap the variable (<code>i</code>/<code>j</code>) of the inner 
and outer loops as shown below.</p>
<p>
Original code:</p>
<pre><code>     for(i = 0; i &lt; 8; ++i){
       for(j = 0; j &lt; 8; ++j){
         sum = sum + A[i][j];
       }
     }</code></pre>
<p>New code:</p>
<pre><code>     for(j = 0; j &lt; 8; ++j){
       for(i = 0; i &lt; 8; ++i){
         sum = sum + A[i][j];
       }
     }</code></pre>
<p>87 Cycles, for similar reasons to the explanation provided in part (c).</p>
</li>
</ol>
</li>
<!-- End of Question -->

<li> <!-- Begin Question -->
<p>In this problem, we assume that both of the rotators are right rotators. If the 
rotator for read is a right rotator and the rotator for write is a left rotator, 
PA[1:0] can be used as the control for both rotators.</p>

<table>
<thead>
<tr><th>PA[1:0]</th><th>SIZE</th><th>RD/WR</th><th>1st/2nd</th>
<th>LD.MDR[3:0]</th><th>ROT[1:0]</th><th>WE[3:0]</th></tr>
</thead>
<tbody>
<tr><td>00</td><td>B</td><td>RD</td><td>X</td>
<td>XXX1</td><td>00</td><td>0000</td></tr>
<tr><td>00</td><td>B</td><td>WR</td><td>X</td>
<td>XXX0</td><td>00</td><td>0001</td></tr>
<tr><td>00</td><td>H</td><td>RD</td><td>X</td>
<td>XX11</td><td>00</td><td>0000</td></tr>
<tr><td>00</td><td>H</td><td>WR</td><td>X</td>
<td>XX00</td><td>00</td><td>0011</td></tr>
<tr><td>00</td><td>W</td><td>RD</td><td>X</td>
<td>1111</td><td>00</td><td>0000</td></tr>
<tr><td>00</td><td>W</td><td>WR</td><td>X</td>
<td>0000</td><td>00</td><td>1111</td></tr>
<tr><td>01</td><td>B</td><td>RD</td><td>X</td>
<td>XXX1</td><td>01</td><td>0000</td></tr>
<tr><td>01</td><td>B</td><td>WR</td><td>X</td>
<td>XXX0</td><td>11</td><td>0010</td></tr>
<tr><td>01</td><td>H</td><td>RD</td><td>X</td>
<td>XX11</td><td>01</td><td>0000</td></tr>
<tr><td>01</td><td>H</td><td>WR</td><td>X</td>
<td>XX00</td><td>11</td><td>0110</td></tr>
<tr><td>01</td><td>W</td><td>RD</td><td>1st</td>
<td>X111</td><td>01</td><td>0000</td></tr>
<tr><td>01</td><td>W</td><td>RD</td><td>2nd</td>
<td>1000</td><td>01</td><td>0000</td></tr>
<tr><td>01</td><td>W</td><td>WR</td><td>1st</td>
<td>0000</td><td>11</td><td>1110</td></tr>
<tr><td>01</td><td>W</td><td>WR</td><td>2nd</td>
<td>0000</td><td>11</td><td>0001</td></tr>
<tr><td>10</td><td>B</td><td>RD</td><td>X</td>
<td>XXX1</td><td>10</td><td>0000</td></tr>
<tr><td>10</td><td>B</td><td>WR</td><td>X</td>
<td>XXX0</td><td>10</td><td>0100</td></tr>
<tr><td>10</td><td>H</td><td>RD</td><td>X</td>
<td>XX11</td><td>10</td><td>0000</td></tr>
<tr><td>10</td><td>H</td><td>WR</td><td>X</td>
<td>XX00</td><td>10</td><td>1100</td></tr>
<tr><td>10</td><td>W</td><td>RD</td><td>1st</td>
<td>XX11</td><td>10</td><td>0000</td></tr>
<tr><td>10</td><td>W</td><td>RD</td><td>2nd</td>
<td>1100</td><td>10</td><td>0000</td></tr>
<tr><td>10</td><td>W</td><td>WR</td><td>1st</td>
<td>0000</td><td>10</td><td>1100</td></tr>
<tr><td>10</td><td>W</td><td>WR</td><td>2nd</td>
<td>0000</td><td>10</td><td>0011</td></tr>
<tr><td>11</td><td>B</td><td>RD</td><td>X</td>
<td>XXX1</td><td>11</td><td>0000</td></tr>
<tr><td>11</td><td>B</td><td>WR</td><td>X</td>
<td>XXX0</td><td>01</td><td>1000</td></tr>
<tr><td>11</td><td>H</td><td>RD</td><td>1st</td>
<td>XXX1</td><td>11</td><td>0000</td></tr>
<tr><td>11</td><td>H</td><td>RD</td><td>2nd</td>
<td>XX10</td><td>11</td><td>0000</td></tr>
<tr><td>11</td><td>H</td><td>WR</td><td>1st</td>
<td>XX00</td><td>01</td><td>1000</td></tr>
<tr><td>11</td><td>H</td><td>WR</td><td>2nd</td>
<td>XX00</td><td>01</td><td>0001</td></tr>
<tr><td>11</td><td>W</td><td>RD</td><td>1st</td>
<td>XXX1</td><td>11</td><td>0000</td></tr>
<tr><td>11</td><td>W</td><td>RD</td><td>2nd</td>
<td>1110</td><td>11</td><td>0000</td></tr>
<tr><td>11</td><td>W</td><td>WR</td><td>1st</td>
<td>0000</td><td>01</td><td>1000</td></tr>
<tr><td>11</td><td>W</td><td>WR</td><td>2nd</td>
<td>0000</td><td>01</td><td>0111</td></tr>
</tbody>
</table>
<table>
<caption>Legend</caption>
<tbody>
<tr><td>B(yte)</td><td>00</td></tr>
<tr><td>H(alf word)</td><td>01</td></tr>
<tr><td>W(ord)</td><td>10</td></tr>
<tr><td>RD(read)</td><td>0</td></tr>
<tr><td>WR(write)</td><td>1</td></tr>
<tr><td>1st</td><td>0</td></tr>
<tr><td>2nd</td><td>1</td></tr>
</tbody>
</table>
</li>
